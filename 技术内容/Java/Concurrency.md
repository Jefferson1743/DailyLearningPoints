# Concurrency Programming

## 并发编程的挑战
```
并发编程的三个大挑战：
    1. 上下文切换
    2. 死锁
    3. 资源限制
```

### 查看Java程序运行的方法（jstack）

```shell
    jstack pid > ~/Documents/dump.txt
    //获取java程序运行过程中的日志

    vim ~/Documents/dump.txt
    //查看具体的运行参数，了解运行状态
```

### 上下文切换

> 并发能够提升CPU的使用效率，同时进行上下文切换有线程创建和上下文切换的成本。如果过于频繁，可能会导致性能下降。

#### 减少上下文切换的方法

1. 无锁的并发编程。
2. 使用CAS算法。
3. 减少使用线程。
4. 协程代替多线程（单线程里实现多任务的调度，在单线程李维持多个任务的切换）

### 死锁

#### 死锁的介绍

##### 死锁的条件
1. 互斥条件
2. 请求与保持
3. 不可剥夺条件
4. 循环等待

##### 预防死锁的方法
1. 一次性分配所有资源
2. 只要有一个资源无法获取，就不分配其他资源
3. 可以剥夺其他资源
4. 资源有序分配

##### 解决死锁的方法
1. 以确定的顺序获取锁
2. 超时放弃

